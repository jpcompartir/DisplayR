<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="DisplayR">
<title>Plotting &amp; Theme Functions • DisplayR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plotting &amp; Theme Functions">
<meta property="og:description" content="DisplayR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">DisplayR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/plotting_theme_functions.html">Plotting &amp; Theme Functions</a>
    <a class="dropdown-item" href="../articles/powerpoint.html">Charts for PowerPoint</a>
    <a class="dropdown-item" href="../articles/tables.html">Creating Beautiful Tables</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jpcompartir/DisplayR" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Plotting &amp; Theme Functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jpcompartir/DisplayR/tree/mainvignettes/plotting_theme_functions.Rmd" class="external-link"><code>vignettes/plotting_theme_functions.Rmd</code></a></small>
      <div class="d-none name"><code>plotting_theme_functions.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jpcompartir.github.io/DisplayR/" class="external-link">DisplayR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="plotting-functions">Plotting Functions<a class="anchor" aria-label="anchor" href="#plotting-functions"></a>
</h2>
<p>When working on research projects or Understand phases, there is
often a set of charts you will create at the beginning, and then at
multiple points throughout the project. These charts will help you
perform common exploratory data analysis (EDA) tasks to better
understand your data and identify areas of investigation. Some of these
charts sit naturally in other packages such as:</p>
<ul>
<li>{ParseR} - descriptive plots of text distributions e.g. Pairwise
Correlations, n-gram plots, Weighted log-odds</li>
<li>{SegmentR} - plots for topic modelling outputs e.g. top terms</li>
<li>{ConnectR} - network visualisations e.g. Retweet network, mention
network</li>
</ul>
<p>Other plots which do not have a clear and obvious location,
e.g. sentiment distributions, volume over time etc. will sit here in
{DisplayR}. They most likely will <em>not</em> be the centrepiece of a
delivery, and they should not be used as a substitute for thinking about
the problem at hand and creating bespoke graphics when called for*. They
do however represent valuable efficiency gains in the EDA workflow, and
prime clients for a Capture Intelligence deck or delivery.</p>
<p>*See the Capture Cookbook and Visualisation Guidelines for more
information on creating Bespoke graphics and adhering to good data
visualisation principles.</p>
<div class="section level3">
<h3 id="volume-over-time">Volume Over Time<a class="anchor" aria-label="anchor" href="#volume-over-time"></a>
</h3>
<p>When working with the data from various Social Media APIs (Twitter,
Facebook, Reddit etc.) there is usually a time stamp or date/time
column, this column can be used to visualise when the conversation takes
place and to identify when important changes in volume occur.</p>
<p>We’ll use {DisplayR}’s dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">DisplayR</span><span class="fu">::</span><span class="va"><a href="../reference/disp_example.html">disp_example</a></span></span></code></pre></div>
<div class="section level4">
<h4 id="single-element---ungrouped-data-frame">Single Element - Ungrouped Data Frame<a class="anchor" aria-label="anchor" href="#single-element---ungrouped-data-frame"></a>
</h4>
<p>We feed the dataset into the <code>disp_plot_vot</code> function,
setting <code>date = date</code>, plot_type = “line” and time_unit =
“week”.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#to access function's documentation:</span></span>
<span><span class="op">?</span><span class="va">dr_plot_vot</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_vot.html">dr_plot_vot</a></span><span class="op">(</span>date_var <span class="op">=</span> <span class="va">date</span>, </span>
<span>                plot_type <span class="op">=</span> <span class="st">"line"</span>, </span>
<span>                time_unit <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 1 row containing missing values (`geom_line()`).</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>Alternatively, we could generate a plot where we count the volume per
day:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_vot.html">dr_plot_vot</a></span><span class="op">(</span>date_var <span class="op">=</span> <span class="va">date</span>, </span>
<span>                plot_type <span class="op">=</span> <span class="st">"line"</span>, </span>
<span>                time_unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 1 row containing missing values (`geom_line()`).</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>You’ll notice the plot’s title, y-axis label and x-axis text (there
is no x axis label currently) change auto-magically.</p>
<p>There is also the option to use bars rather than a line, we’ll render
a chart with bars and change the colour using the plot_type = “bar” and
colour = “#d80a83” arguments:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_vot.html">dr_plot_vot</a></span><span class="op">(</span>date_var <span class="op">=</span> <span class="va">date</span>, </span>
<span>                plot_type <span class="op">=</span> <span class="st">"bar"</span>, </span>
<span>                time_unit <span class="op">=</span> <span class="st">"day"</span>, </span>
<span>                colour <span class="op">=</span> <span class="st">"#d80a83"</span>, </span>
<span>                smooth <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; Warning: Removed 1 rows containing non-finite values (`stat_smooth()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 1 rows containing missing values (`position_stack()`).</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="multiple-elements---grouped-data-frame">Multiple Elements - Grouped Data Frame<a class="anchor" aria-label="anchor" href="#multiple-elements---grouped-data-frame"></a>
</h4>
<p>Often we want - or need - to visualise the trend in volume for
multiple things at the same time, where things are similar objects
contained in the same variable. For example, we may want to visualise
the volume over time per topic, or per sentiment category.</p>
<p>We can plot the volume of each topic over time, though it can be (is
nearly always) inadvisable to map 9 colours on a plot:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">sentiment</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_vot_group.html">dr_plot_vot_group</a></span><span class="op">(</span>group_var <span class="op">=</span> <span class="va">topic</span>,</span>
<span>                    date_var <span class="op">=</span> <span class="va">date</span>,</span>
<span>                    time_unit <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>As there are only three sentiment categories, we could map sentiment
more simply, and use the <code>scale_colour_manual</code> function to
re-colour our lines:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sentiment_colours</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"positive"</span> <span class="op">=</span> <span class="st">"#107C10"</span>, <span class="st">"negative"</span> <span class="op">=</span> <span class="st">"#D83B01"</span>, <span class="st">"neutral"</span> <span class="op">=</span> <span class="st">"#FFB900"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">sentiment</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_vot_group.html">dr_plot_vot_group</a></span><span class="op">(</span>group_var <span class="op">=</span> <span class="va">sentiment</span>,</span>
<span>                    date_var <span class="op">=</span> <span class="va">date</span>,</span>
<span>                    time_unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_colour_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">sentiment_colours</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="st">"Neutral and negative sentiment consistently higher than positive barring a brief period in the second week of March."</span>, width <span class="op">=</span> <span class="fl">80</span><span class="op">)</span><span class="op">)</span> <span class="co"># Use stringr::str_wrap to wrap the title according to a specified with (# of characters)</span></span>
<span><span class="co">#&gt; Scale for <span style="color: #00BB00;">colour</span> is already present.</span></span>
<span><span class="co">#&gt; Adding another scale for <span style="color: #00BB00;">colour</span>, which will replace the existing scale.</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
</div>
<div class="section level3">
<h3 id="sentiment-distributions">Sentiment Distributions<a class="anchor" aria-label="anchor" href="#sentiment-distributions"></a>
</h3>
<p>We looked briefly at how to plot sentiment over time using the
dr_plot_vot_group function, but we can also use some sentiment-specific
functions to visualise sentiment.</p>
<p>We have:</p>
<ul>
<li>dr_plot_sent - a vertical bar chart showing the distribution of
sentiment</li>
<li>dr_plot_sent_group - stacked horizontal bar chart for group
sentiment</li>
<li>dr_plot_sent_vot - stacked bar chart specifically for sentiment
categories</li>
</ul>
<div class="section level4">
<h4 id="ungrouped">Ungrouped<a class="anchor" aria-label="anchor" href="#ungrouped"></a>
</h4>
<p>When we want to plot a quick sentiment distribution chart using bars
we can use the dr_plot_sent function, which has limited scope for
customisation.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_sent.html">dr_plot_sent</a></span><span class="op">(</span>sentiment_var <span class="op">=</span> <span class="va">sentiment</span>,</span>
<span>               bar_labels <span class="op">=</span> <span class="st">"percent"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>We could alternatively set the bar_labels to volume and add a
descriptive title:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_sent.html">dr_plot_sent</a></span><span class="op">(</span>sentiment_var <span class="op">=</span> <span class="va">sentiment</span>,</span>
<span>               bar_labels <span class="op">=</span> <span class="st">"volume"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Negative sentiment ~1.7x higher than positive"</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Or no bar_labels:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_sent.html">dr_plot_sent</a></span><span class="op">(</span>sentiment_var <span class="op">=</span> <span class="va">sentiment</span>,</span>
<span>               bar_labels <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="grouped">Grouped<a class="anchor" aria-label="anchor" href="#grouped"></a>
</h4>
<p>More often than not, we won’t want to create just one sentiment
chart, so we’ve created a function for plotting grouped sentiment
charts.</p>
<p>The <code>dr_plot_sent_group</code> function comes with the
additional argument, <code>group_var =</code>. When setting
<code>plot_type = "percent"</code> and
<code>bar_labels = "volume"</code>, we can add the y-axis (now x
visually) ticks back and give a title to make the plot more
explicit,</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_sent_group.html">dr_plot_sent_group</a></span><span class="op">(</span>group_var <span class="op">=</span> <span class="va">topic</span>, plot_type <span class="op">=</span> <span class="st">"percent"</span>, bar_labels <span class="op">=</span> <span class="st">"volume"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="co"># Add the percentage back to the axis ticks</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percentage of posts"</span><span class="op">)</span>  <span class="co">#Add the label back</span></span>
<span><span class="co">#&gt; Scale for <span style="color: #00BB00;">y</span> is already present.</span></span>
<span><span class="co">#&gt; Adding another scale for <span style="color: #00BB00;">y</span>, which will replace the existing scale.</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>There are other options, we can set the bar’s labels to percent, and
titles or change the axis labels, move the legend etc.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_sent_group.html">dr_plot_sent_group</a></span><span class="op">(</span>group_var <span class="op">=</span> <span class="va">topic</span>, plot_type <span class="op">=</span> <span class="st">"percent"</span>, bar_labels <span class="op">=</span> <span class="st">"percent"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Percentage of posts"</span>, <span class="co">#We use x = because the plot has had its axes reversed</span></span>
<span>       title <span class="op">=</span> <span class="st">"Risks &amp; Challenges drive negative sentiment"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Plot ordered by overall volume"</span>, <span class="co">#Just an example</span></span>
<span>       caption <span class="op">=</span> <span class="st">"Data Source: Social Media"</span><span class="op">)</span><span class="op">+</span><span class="co">#Just an example</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>We can also plot the volumes rather than percentages on the bars
themselves:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_sent_group.html">dr_plot_sent_group</a></span><span class="op">(</span>group_var <span class="op">=</span> <span class="va">topic</span>, sentiment_var <span class="op">=</span> <span class="va">sentiment</span>, plot_type <span class="op">=</span> <span class="st">"volume"</span>, bar_labels <span class="op">=</span> <span class="st">"percent"</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>However, as we can see, this can lead to unwanted results, especially
when using bar_labels. So we could remove the labels and add the
gridlines back.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_sent_group.html">dr_plot_sent_group</a></span><span class="op">(</span>group_var <span class="op">=</span> <span class="va">topic</span>, sentiment_var <span class="op">=</span> <span class="va">sentiment</span>, plot_type <span class="op">=</span> <span class="st">"volume"</span>, bar_labels <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Scale for <span style="color: #00BB00;">y</span> is already present.</span></span>
<span><span class="co">#&gt; Adding another scale for <span style="color: #00BB00;">y</span>, which will replace the existing scale.</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="sentiment-over-time">Sentiment over time<a class="anchor" aria-label="anchor" href="#sentiment-over-time"></a>
</h4>
<p>We showed an example of using the <code>dr_plot_vot_group</code>
function to visualise sentiment over time, there is also the
<code>dr_plot_sent_vot</code> function, made specifically for sentiment
and can provide bars or lines. As we’ve already seen lines for
sentiment, we’ll show bars. This function allows the user to enter the
sentiment mapping directly, so let’s switch to a more
accessibility-friendly colour palette.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dr_plot_sent_vot.html">dr_plot_sent_vot</a></span><span class="op">(</span>sentiment_var <span class="op">=</span> <span class="va">sentiment</span>, </span>
<span>                   date_var <span class="op">=</span> <span class="va">date</span>, </span>
<span>                   plot_type <span class="op">=</span> <span class="st">"bar"</span>, </span>
<span>                   time_unit <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>                   sentiment_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"positive"</span> <span class="op">=</span> <span class="st">"#007fff"</span>,</span>
<span>                                         <span class="st">"negative"</span> <span class="op">=</span> <span class="st">"#D83B01"</span>,</span>
<span>                                         <span class="st">"neutral"</span> <span class="op">=</span>  <span class="st">"#a89797"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 1 rows containing missing values (`position_stack()`).</span></span></code></pre></div>
<p><img src="plotting_theme_functions_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
</div>
</div>
<div class="section level3">
<h3 id="subtopic">Subtopic<a class="anchor" aria-label="anchor" href="#subtopic"></a>
</h3>
</div>
</div>
<div class="section level2">
<h2 id="theme-functions">Theme Functions<a class="anchor" aria-label="anchor" href="#theme-functions"></a>
</h2>
<p>There are a number of theme functions included in {DisplayR}, they
are to be applied according to the nature of the project and tend to
take care of colour palettes and fonts. If you think there is a theme,
or a number of themes missing, submit an issue at: (<a href="https://github.com/jpcompartir/DisplayR/issues" class="external-link uri">https://github.com/jpcompartir/DisplayR/issues</a>).</p>
<p>The general idea is to add the theme you need after rendering your
plot.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jack Penzer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
